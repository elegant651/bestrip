
<dom-module id="register-schedule">
	<style>
		.wrapperDate {
			@apply(--layout-horizontal);			
		}

		.wrapperDate paper-input {
			margin-right: 20px;
		}

		paper-button.colorful {
			background: #4285f4;
      		color: #fff;
		}

		#btnRegister {
			margin-top: 20px;
		}
	</style>
	<template>		
		<div class="vertical-section">
			<h2>City</h2>
			<paper-button id="btnSelCity" raised data-dialog="dlogCity" on-tap="showCityDlog">Select City<paper-button>	
		</div>
		<div class="vertical-section">
			<h2>Date</h2>			
			<div class="wrapperDate">
				<paper-input id="piStartDate" label="Select Start Date" on-tap="showStartDateDlog"></paper-input>
				<paper-input id="piFinishDate" label="Select Finish Date" on-tap="showFinishDateDlog"></paper-input>
			</div>
			<paper-date-picker-dialog id="datePicker" date="2015/8/8" on-value-changed="dateValueChanged"></paper-date-picker-dialog>
		</div>
		<div class="vertical-section">
			<h2>Theme</h2>
			<paper-radio-group selected="all">
				<paper-radio-button name="all">All</paper-radio-button>
				<paper-radio-button name="transport">Transport</paper-radio-button>
				<paper-radio-button name="stay">Stay</paper-radio-button>
				<paper-radio-button name="food">Food</paper-radio-button>
				<paper-radio-button name="sightsee">Sightsee</paper-radio-button>
			</paper-radio-group>
		</div>
		<div class="vertical-section">
			<h2>Contact</h2>
			<paper-input label="phone number or facebook"></paper-input>
		</div>
		<div class="vertical-section">
			<paper-button id="btnRegister" raised on-tap="register" class="colorful ripple"><iron-icon icon="check"></iron-icon>Register</paper-button>
		</div>
		<city-dialog id="cityDlog" on-select-city="onSelectCity"></city-dialog>
	</template>
</dom-module>
<script>
	Polymer({
		is: "register-schedule",

		properties: {
			dlogType: Number,
			selCityIdx: Number
		},

		showCityDlog: function() {						
			this.$.cityDlog.toggle();
		},

		showStartDateDlog: function() {
			this.dlogType = 0;
			this.$.datePicker.toggle();
		},

		showFinishDateDlog: function() {
			this.dlogType = 1;
			this.$.datePicker.toggle();
		},

		register: function() {

		},

		dateValueChanged: function() {
			console.log("dateValueChanged:" + this.$.datePicker.value);			
			var date = this.$.datePicker.value;
			var year = Intl.DateTimeFormat(this.locale, { year: 'numeric' }).format(date);
			var month = Intl.DateTimeFormat(this.locale, { month: 'short' }).format(date);
			var day = Intl.DateTimeFormat(this.locale, { day: 'numeric' }).format(date);
			
			var strDate = year+" "+month+" "+day;
    		if(this.dlogType==0){
    			this.$.piStartDate.setAttribute("value", strDate);
    		} else {
    			this.$.piFinishDate.setAttribute("value", strDate);
    		}
		},

		onSelectCity: function(e) {			
			this.selCityIdx = e.detail.idx;
			var strName = e.detail.name;
			this.$.btnSelCity.innerHTML = strName;
		}
	});
</script>