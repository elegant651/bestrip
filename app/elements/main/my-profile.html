
<dom-module id="my-profile">
	<style>		

		.field {
			@apply(--layout-horizontal);
			text-align: center;
		}		

		h2 {
			margin-right: 20px;
			font-size: 18px;
			font-weight: normal;
		}

		.userbox {
			text-align: center;
		}

		.infoWrapper {
			text-align: center;
		}

		.infoWrapper .title {
			font-size: 22px;
			color: rgb(253,68,19);	
		}

		paper-checkbox{
	        --paper-checkbox-checked-color: var(--paper-orange-500);
	        --paper-checkbox-checked-ink-color: var(--paper-orange-500);
	        --paper-checkbox-unchecked-color: var(--paper-orange-900);
	        --paper-checkbox-unchecked-ink-color: var(--paper-orange-900);
	        --paper-checkbox-label-color: rgb(126,126,126);
	        margin-left: 10px;
	        margin-right: 10px;
	        margin-bottom: 10px;
	    }

	    paper-checkbox:checked {
	    	--paper-checkbox-label-color: rgb(253,68,19);
	    }

      #btnUpdate {
      	margin-top: 30px;
      	margin: 0 auto;	      	
      }
	</style>
	<template>		
		<firebase-document
	     	location="{{userTarget}}"
	     	data="{{userData}}"
	     	>
	     </firebase-document>
		
		<div class="userbox">
			<div class="pictureField">				
				<iron-image src="{{userData.picture}}" style="width:100px; height:100px;"></iron-image>			
			</div>

			<div class="infos">
				<iron-icon class="icGender" src="{{_computeUserGender(userData.gender)}}"></iron-icon>
				<div class="username">{{userData.username}}</div>
				<div class="age">, [[_computeUserAge(userData.birth)]]</div>
			</div>
		</div>
				
		<div class="infoWrapper vertical-section">
			<div class="title">My information</div>
			<div class="prefWrapper">
				<h2>Preference</h2>
				<div class="content">
					<template is="dom-repeat" items="{{prefItems}}">
						<paper-checkbox noink checked$="{{item.checked}}">{{item.name}}</paper-checkbox>
					</template>					
				</div>
			</div>
			<div class="lifeWrapper">
				<h2>Life style</h2>
				<div class="content">
					<template is="dom-repeat" items="{{lifeItems}}">
						<paper-checkbox noink>{{item}}</paper-checkbox>
					</template>					
				</div>
			</div>
		</div>		

		<div class="field">
			<paper-button id="btnUpdate" on-tap="updateProfile" disabled$="{{checkData(username, email, password, passwordCheck, birth, countryCode, phone)}}" raised class="colorful ripple">Update</paper-button>
		</div>
	</template>
</dom-module>
<script>
	Polymer({
		is: "my-profile",

		properties: {		
			userId: {
				type: String
			},

	      	userTarget: {
				type: String,
				computed: '_computeUserTarget(userId)'
			},

			userData: {
				type: Object				
			},

			prefItems: Array,

			lifeItems: Array
		},

		ready: function() {
			this.prefItems = [
				{name:'culinary', checked: false}, {name:'holiday', checked: false}, {name:'romantic', checked: false}, {name:'luxury', checked: false}, {name:'city tour', checked: false}, {name:'roadtrip', checked: false}, {name:'activity', checked: false}, {name:'beach', checked: false},
				{name:'chiling', checked: false}, {name:'cultural', checked: false}, {name:'rest', checked: false}, {name:'adventure', checked: false}, {name:'health', checked: false}							
			];

			this.lifeItems = [
				'swimming', 'surfing', 'skiing', 'diving', 'hiking', 'fishing', 'bicycling', 'shopping',
				'movie', 'artist', 'music', 'cooking', 'photography'
			];
		},

		_computeUserTarget: function(userId) {
			if(user!=null){				
				return "https://flamingo365.firebaseio.com/users/"+userId;
			}			
		},

		_computeUserGender: function(gender) {
			if(gender==="male"){
				return "../../images/main/male_imae.png";
			} else {
				return "../../images/main/female_imae.png";
			}
		},

		_computeUserAge: function(birth) {
			if(birth==null){
				return "";
			}
			
			var date = new Date(birth);
			var ageDate = new Date(Date.now()-date.getTime());
			return Math.abs(ageDate.getFullYear()-1970);
		},

		
		updateProfile: function() {			
						
			var data = {								
				username: this.username,				
				countryCode: this.countryCode,
				phone: this.phone				
			};

			var ref = new Firebase("https://flamingo365.firebaseio.com/users");	    
			// ref.push(data);	  			

			// this.fire('show-dialog', {content: "Sign-up has completed.", url: "/register"});

			// this.initialize();
		}
	});
</script>