
<dom-module id="my-profile">
	<style>
		.field {
			@apply(--layout-horizontal);
		}

		h2 {
			margin-right: 20px;
		}
	</style>
	<template>
		<firebase-auth id="firebaseLogin" status-known="{{statusKnown}}" location="https://flamingo365.firebaseio.com" provider="password" on-error="errorHandler" on-user-created="userSuccessHandler" on-password-changed="userSuccessHandler" on-password-reset="userSuccessHandler" on-user-removed="userSuccessHandler"></firebase-auth>
		
		<div class="field">
			<h2>Name</h2>
			<paper-input id="piUserName" value="{{username}}" label="ex) William" required auto-validate></paper-input>
		</div>
		
		<!-- <div class="field">
			<h2>Nationality</h2>
			<paper-input id="piNationality"></paper-input>
		</div> -->
		<div class="field">
			<h2>Phone Number</h2>
			<paper-input id="piCountryCode" type="number" label="country code (ex:82)" value="{{countryCode}}" required auto-validate></paper-input>
			<paper-input id="piPhone" type="number" value="{{phone}}" required auto-validate></paper-input>
		</div>
		
		<paper-button id="btnUpdate" on-tap="updateProfile" disabled$="{{checkData(username, email, password, passwordCheck, birth, countryCode, phone)}}" raised class="colorful ripple">Update</paper-button>
	</template>
</dom-module>
<script>
	Polymer({
		is: "my-profile",

		properties: {
			message: {
	        	type: String,
	        	value: ''
	      	},			

			username: {
	        	type: String,
	        	value: ''
	      	},

	      	countryCode: Number,

	      	phone: Number
		},

		ready: function() {

		},

		initialize: function() {
			this.username = "";
			
			this.countryCode = 0;
			this.phone = 0;
		},

		// checkData: function(username, email, password, passwordCheck, birth, countryCode, phone) {			
		// 	if(this.username==''){
		// 		return true;
		// 	}
		// 	if(this.password=='' || this.passwordCheck==''){
		// 		return true;
		// 	}
		// 	if(this.password!==this.passwordCheck){
		// 		return true;
		// 	}

		// 	if(this.birth==''){
		// 		return true;
		// 	}
		// 	if(this.countryCode==null || this.countryCode==0){
		// 		return true;
		// 	}
		// 	if(this.phone==null || this.phone==0){
		// 		return true;
		// 	}

		// 	return false;
		// },

		errorHandler: function(e) {
	      this.message = 'Error: ' + e.detail.message;
	      console.log(this.message);
	    },

	    userSuccessHandler: function(e) {
	      this.message = e.type + ' success!';
	      console.log(this.message);
	    },

		updateProfile: function() {			
						
			var data = {								
				username: this.username,				
				countryCode: this.countryCode,
				phone: this.phone				
			};

			var ref = new Firebase("https://flamingo365.firebaseio.com/users");	    
			// ref.push(data);	  			

			// this.fire('show-dialog', {content: "Sign-up has completed.", url: "/register"});

			this.initialize();
		}
	});
</script>